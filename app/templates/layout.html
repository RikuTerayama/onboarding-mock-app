<!doctype html>
<html>
  <head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>{{ title or t("home_title", lang|default("en")) }}</title>
    <style>
      body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 0; background: #f6f7f9;}
      header { background:#111827; color:#fff; padding:16px 20px; }
      header a { color:#fff; text-decoration:none; margin-right:12px; opacity:0.9; }
      main { padding: 20px; max-width: 980px; margin: 0 auto; }
      .card { background:#fff; border-radius:14px; padding:16px; box-shadow: 0 2px 12px rgba(0,0,0,0.06); margin-bottom: 14px; }
      .row { display:flex; gap:12px; flex-wrap:wrap; }
      .col { flex:1; min-width: 260px; }
      .muted { color:#6b7280; }
      .badge { display:inline-block; padding:4px 10px; border-radius:999px; font-size:12px; background:#eef2ff; }
      .btn { display:inline-block; border:0; padding:10px 12px; border-radius:10px; cursor:pointer; text-decoration:none; }
      .btn-primary { background:#111827; color:#fff; }
      .btn-ghost { background:#e5e7eb; color:#111827; }
      .btn-danger { background:#ef4444; color:#fff; }
      input, select, textarea { width:100%; padding:10px; border-radius:10px; border:1px solid #d1d5db; }
      label { font-size:12px; color:#374151; display:block; margin-top:10px; margin-bottom:6px; }
      table { width:100%; border-collapse:collapse; }
      th, td { padding:10px; border-bottom:1px solid #eee; vertical-align:top; }
      .dm { border-left: 4px solid #111827; padding-left: 12px; }
      .small { font-size: 12px; }
      .lang-switcher { float: right; margin-top: 4px; }
      .lang-switcher a { opacity: 1; font-weight: bold; }
      .lang-switcher a.active { text-decoration: underline; }
    </style>
  </head>
  <body>
    <header>
      <strong>{{ t("home_title", lang|default("en")) }}</strong>
      <span class="small" style="margin-left:10px; color:#cbd5e1;">{{ t("home_subtitle", lang|default("en")) }}</span>
      <div class="lang-switcher">
        {% set current_lang = lang|default("en") %}
        <a href="/set-lang?lang=en&next={{ request.url.path }}" class="{{ 'active' if current_lang == 'en' else '' }}">{{ t("lang_en", current_lang) }}</a>
        <a href="/set-lang?lang=ja&next={{ request.url.path }}" class="{{ 'active' if current_lang == 'ja' else '' }}">{{ t("lang_ja", current_lang) }}</a>
      </div>
      <nav style="margin-top:10px;">
        <a href="/">{{ t("nav_home", lang|default("en")) }}</a>
        <a href="/onboard">{{ t("nav_create", lang|default("en")) }}</a>
        <a href="/chat">Chat</a>
        <a href="/reminders">{{ t("nav_reminders", lang|default("en")) }}</a>
        <a href="/tickets">Tickets</a>
      </nav>
    </header>
    <main>
      {% block content %}{% endblock %}
    </main>
  </body>
</html>
